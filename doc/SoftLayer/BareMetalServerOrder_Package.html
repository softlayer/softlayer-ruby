<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class SoftLayer::BareMetalServerOrder_Package - softlayer_api gem 3.0.0</title>

<link href="../fonts.css" rel="stylesheet">
<link href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/navigation.js"></script>
<script src="../js/search_index.js"></script>
<script src="../js/search.js"></script>
<script src="../js/searcher.js"></script>
<script src="../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Server
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-hardware_order">#hardware_order</a>
    
    <li ><a href="#method-i-place_order-21">#place_order!</a>
    
    <li ><a href="#method-i-verify">#verify</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-SoftLayer::BareMetalServerOrder_Package">
  <h1 id="class-SoftLayer::BareMetalServerOrder_Package" class="class">
    class SoftLayer::BareMetalServerOrder_Package
  </h1>

  <section class="description">
    
<p>This class is used to order a hardware server using a product package.</p>

<p>Ordering a server using a product package is a more complex process than
ordering with simple attributes (as is done by the <a
href="BareMetalServerOrder.html">BareMetalServerOrder</a> class). However
with that complexity comes the the ability to specify the configuration of
the server in exacting detail.</p>

<p>To use this class, you first select a product package. The product package
defines the base configuration, the chassis, of the server as well as the
set of configuration options available for that chassis. To fully configure
the server you must select the value for each configuration option.</p>

<p>This class roughly Corresponds to the
SoftLayer_Container_Product_Order_Hardware_Server data type in the <a
href="../SoftLayer.html">SoftLayer</a> API</p>

<p><a
href="http://sldn.softlayer.com/reference/datatypes/SoftLayer_Container_Product_Order_Hardware_Server">sldn.softlayer.com/reference/datatypes/SoftLayer_Container_Product_Order_Hardware_Server</a></p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-configuration_options" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">configuration_options</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The value of this property should be a hash. The keys of the hash are
ProdcutItemCategory codes (like &#39;os&#39; and &#39;ram&#39;) while the
values may be Integers or Objects. The Integer values should be the
<code>id</code> of a <code>SoftLayer_Product_Item_Price</code> representing
the configuration option chosen for that category. Objects must respond to
the <code>price_id</code> message and return an integer that is the
<code>id</code> of a <code>SoftLayer_Product_Item_Price</code>. Instances
of the <a
href="ProductConfigurationOption.html">ProductConfigurationOption</a> class
behave this way.</p>

<p>At a minimum, the configuation_options should include entries for each of
the categories required by the package (i.e. those returned from <a
href="ProductPackage.html#method-i-required_categories">SoftLayer::ProductPackage#required_categories</a>)</p>
        
        </div>
      </div>
      
      <div id="attribute-i-datacenter" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">datacenter</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>An instance of <a href="Datacenter.html">SoftLayer::Datacenter</a>. The
server will be provisioned in this data center. The set of datacenters
available is determined by the package and may be obtained from the <a
href="ProductPackage.html">SoftLayer::ProductPackage</a> object using the
datacenter_options method.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-domain" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">domain</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The domain of the server being created (i.e. &#39;softlayer.com&#39; is the
domain of sldn.softlayer.com)</p>
        
        </div>
      </div>
      
      <div id="attribute-i-hostname" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">hostname</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The hostname of the server being created (i.e. &#39;sldn&#39; is the
hostname of sldn.softlayer.com).</p>
        
        </div>
      </div>
      
      <div id="attribute-i-package" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">package</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The product package object (an instance of <a
href="ProductPackage.html">SoftLayer::ProductPackage</a>) identifying the
base configuration for the server. A list of Bare Metal <a
href="Server.html">Server</a> product packages is returned by <a
href="ProductPackage.html#method-c-bare_metal_server_packages">SoftLayer::ProductPackage.bare_metal_server_packages</a></p>
        
        </div>
      </div>
      
      <div id="attribute-i-provision_script_URI" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">provision_script_URI</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The URI of a script to execute on the server after it has been provisioned.
This may be any object which accepts the to_s message. The resulting string
will be passed to <a href="../SoftLayer.html">SoftLayer</a> API.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-ssh_key_ids" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">ssh_key_ids</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>An array of the ids of SSH keys to install on the server upon provisioning
To obtain a list of existing SSH keys, call getSshKeys on the
SoftLayer_Account service:</p>

<pre>client[&#39;Account&#39;].getSshKeys()</pre>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(package, client = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>You initialize a <a
href="BareMetalServerOrder_Package.html">BareMetalServerOrder_Package</a>
by passing in the package that you are ordering from.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/softlayer/BareMetalServerOrder_Package.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">package</span>, <span class="ruby-identifier">client</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@softlayer_client</span> = <span class="ruby-identifier">client</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Client</span>.<span class="ruby-identifier">default_client</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;#{__method__} requires a client but none was given and Client::default_client is not set&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@softlayer_client</span>

  <span class="ruby-ivar">@package</span> = <span class="ruby-identifier">package</span>
  <span class="ruby-ivar">@configuration_options</span> = []
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-place_order-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">place_order!</span><span
            class="method-args">() { |product_order| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Submit the order to be executed by the <a
href="../SoftLayer.html">SoftLayer</a> ordering system. If successful this
will probably result in additional billing items applied to your account!</p>

<p>If you add a block to the method call, it will receive the product order
template before it is sent to the API. You may *<strong>carefully</strong>*
make changes to the template to provide specialized configuration.</p>

<p>The return value of this call is a product order receipt. After submitting
the order, it will proceed to Sales for authorization.</p>
          
          

          
          <div class="method-source-code" id="place_order-21-source">
            <pre><span class="ruby-comment"># File lib/softlayer/BareMetalServerOrder_Package.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">place_order!</span>
  <span class="ruby-identifier">product_order</span> = <span class="ruby-identifier">hardware_order</span>
  <span class="ruby-identifier">product_order</span> = <span class="ruby-keyword">yield</span> <span class="ruby-identifier">product_order</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">softlayer_client</span>[<span class="ruby-string">&quot;Product_Order&quot;</span>].<span class="ruby-identifier">placeOrder</span>(<span class="ruby-identifier">product_order</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verify" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verify</span><span
            class="method-args">() { |product_order| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Present the order for verification by the <a
href="../SoftLayer.html">SoftLayer</a> ordering system. The order is
verified, but not executed. This should not change the billing of your
account.</p>

<p>If you add a block to the method call, it will receive the product order
template before it is sent to the API. You may *<strong>carefully</strong>*
make changes to the template to provide specialized configuration.</p>
          
          

          
          <div class="method-source-code" id="verify-source">
            <pre><span class="ruby-comment"># File lib/softlayer/BareMetalServerOrder_Package.rb, line 88</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">verify</span>
  <span class="ruby-identifier">product_order</span> = <span class="ruby-identifier">hardware_order</span>
  <span class="ruby-identifier">product_order</span> = <span class="ruby-keyword">yield</span> <span class="ruby-identifier">product_order</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">softlayer_client</span>[<span class="ruby-string">&quot;Product_Order&quot;</span>].<span class="ruby-identifier">verifyOrder</span>(<span class="ruby-identifier">product_order</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-hardware_order" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">hardware_order</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Construct and return a hash representing a
<code>SoftLayer_Container_Product_Order_Hardware_Server</code> based on the
configuration options given.</p>
          
          

          
          <div class="method-source-code" id="hardware_order-source">
            <pre><span class="ruby-comment"># File lib/softlayer/BareMetalServerOrder_Package.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">hardware_order</span>
  <span class="ruby-identifier">product_order</span> = {
    <span class="ruby-string">&#39;packageId&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@package</span>.<span class="ruby-identifier">id</span>,
    <span class="ruby-string">&#39;useHourlyPricing&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
    <span class="ruby-string">&#39;hardware&#39;</span> =<span class="ruby-operator">&gt;</span> {
      <span class="ruby-string">&#39;hostname&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@hostname</span>,
      <span class="ruby-string">&#39;domain&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@domain</span>
    }
  }

  <span class="ruby-identifier">product_order</span>[<span class="ruby-string">&#39;location&#39;</span>] = <span class="ruby-ivar">@datacenter</span>.<span class="ruby-identifier">id</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@datacenter</span>
  <span class="ruby-identifier">product_order</span>[<span class="ruby-string">&#39;sshKeys&#39;</span>] = [{ <span class="ruby-string">&#39;sshKeyIds&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@ssh_key_ids</span> }] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@ssh_key_ids</span>
  <span class="ruby-identifier">product_order</span>[<span class="ruby-string">&#39;provisionScripts&#39;</span>] = [<span class="ruby-ivar">@provision_script_URI</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@provision_script_URI</span>

  <span class="ruby-identifier">product_order</span>[<span class="ruby-string">&#39;prices&#39;</span>] = <span class="ruby-ivar">@configuration_options</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:price_id</span>)
      <span class="ruby-identifier">price_id</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">price_id</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">price_id</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword">end</span>

    { <span class="ruby-string">&#39;id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">price_id</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">product_order</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

